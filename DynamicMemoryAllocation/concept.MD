# 20 - 1 메모리 동적할당(Dynamic Memory Allocation)
이번 강좌
- malloc 함수의 이해
- 1차원 배열 동적 할당
- 2차원 배열 동적 할당

* 배열의 크기는 언제나 컴파일 시간에 확정.
즉 컴파일러가 배열의 크기를 추측할 필요 없이 명확하게 나타나 있어야 된다.
그러므로 배열의 크기를 명확하게 정활 수 없어 '충분히 크게' 잡게 되는데, 이렇게 된다면 메모리가 낭비되는 경우가 허다하게 발생한다.
컴퓨터에서 낭비란 곧 비효율적인 프로그램을 의미.

동적 메모리 할당으로 해당 문제점 해결
할당되지 않는 메모리는 절대로 사용할 수 없다.

malloc - memory allocation 의 약자
#include <stdlib.h> 에 정의.
free 는 우리가 할당 받은 다 쓰고 난 후에 메모리 영역을 다시 컴퓨터에게 돌려주는 역할을 한다.
해제(free) 한다. free 를 제대로 하지 안헥 된다면 메모리 누수(memory leak) 발생.

## malloc 은 어디에 할당할까?
힙 영역.
메모리의 힙 부분은 사용자가 자유롭게 할당하거나 해제할 수 있다.
malloc 또한 힙 영역을 사용
힙은 할당과 해제가 자유로운 만큼 제대로 사용해야한다.
만일 힙에 할당은 헀는데, 해제를 하지 않는다면 공간 낭비.
다른 메모리 부분의 경우 컴퓨터가 알아서 처리하기 떄문에 문제 발생할 여지가 적지만, 힙은 인간이 다루는 만큼 철저해야함.

## 2차원 배열의 동적 할당
2 차원 배열을 동적으로 할당하는 방법으로 크게 두 가지 방법을 생각
- 포안터 배열을 사용해서 2 차원 배열 처럼 동작하는 배열을 만드는 방법
- 실제로 2 차원 배열 크기의 메모리를 할당한 뒤 2 차원 배열 포인터로 참조하는 방법

### 포인터 배열을 이용해서 2 차원 배열 할당하기
int **arr 만일 int array[3] 이란 배열을 만들었다면 array -> int *형
arr 배열의 각 원소들은 int *형이므로 달느 int 배열을 가리키기를 갈망
arr 의 하나의 원소가 크기가 y인 배열을 가리키고 있는데 arr 의 원소가 x 개 이므로 전체적으로 봤을 때
총 x * y 배열을 갖는 셈
이렇게 만들어진 배열은 정확히 말해 2차원 배열이라 말하기 힘들다.
배열은 메모리에 연속적으로 있어야 하기 때문이다.
2차원 배열 처럼 생긴 포인터 배열은 2 차원 배열과는 달리 함수의 인자로 손쉽게 넘길 수 있다.
--> 이게 가능한 이유는 우리가 만든 배열은 1 차원 배열들이지 2 차원 배열이 아니기 때문.
main 함수의 인자로 전달되는 argv 역시 이와 같은 성격이다.