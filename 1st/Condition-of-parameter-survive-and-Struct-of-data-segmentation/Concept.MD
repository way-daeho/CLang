# 17 - 변수의 생성 조건 및 데이터 세그먼트의 구조

- 지역 변수 (local variable), 전역 변수 (global variable), 정적 변수 (static variable)
- 데이터 세그먼트 의 구조

## 변수의 접근 범위

- 어떠한 함수 내에서 일반적을 정의된 변수는 해당 함수내에서만 접근할 수 있다.
- 해당 지역에서만 접근할 수 있다 -> 지역 변수
- {} 는 하나의 지역으로 취급, 해당 지역에서 정의된 변수는 바깥 지역에서 정의된 같은 이름의 변수를 가리게 된다.

## 전역 변수

- 어떠한 지역에도 속하지 않느 변수
- 선언 방법 : 맨 바깥에 정의하면 된다.
- 어떠한 지역에도 속해있지 않은 변수를 전역 변수 (glovbal variable) 라고 한다.
- 지역 변수와 달리 코드 어느 곳애서도 접근할 수 있다.
- 지역 변수 -> 함수 종료 시 파괴
- 전역 변수 -> 프로그램 시작 생성 , 프로그램 종료 파괴
- 전역 변수 -> 메모리의 데이터 영역(Data segment) 에 할당
- 전역 변수들은 정의 시 자동으로 0 으로 초기화
- 전역 변수는 모든 함수에서 접근할 수 있기 떄문에 전역 변수를 사용할 때 매우 주의

### 많은 수의 전역 변수를 선언하지 않는 것을 권장

## 변수의 생존 기간

### 일반적으로 정의된 변수들은 자신이 정의된 지역을 빠져나갈 때 파괴.

### 지역을 빠져나가도 파괴되지 않는 변수는 없을까? -> 정적 변수(static variable)

## 정적 변수

정적 변수 선언 방법 -> 일반적인 변수 선언 앞에 static 만 붙여주면 된다.
static int a = 2;
해당 변수는 자신이 선언된 범위를 벗어나더라도 절대로 파괴되지 않는다.
따라서 a가 정의된 지역 밖에서 접근하더라도 a 는 소멸되지 않는다.
정적변수는 딱 한 번 실행되며, 어떠한 함수안에 선언되어 있더라도 함수를 실행하기 전에 a라는 정적 변수로 이미 정의되어있다.
-> 정적 변수를 사용하면 해당 함수가 몇 번 호출되었는지도 쉽게 추적할 수 있다.
정적 변수의 경우 전역 변수처럼 데이터 영역에 저장되고 프로그램이 종료될 때 파괴된다.
전역 변수처럼 정적 변수도 정의시 특별한 값을 지정해 주지 않는 한 0 으로 자동 초기화 된다.

---

## 데이터 세그먼트의 구조

프로그램이 실행될 때 프로그램은 RAM 에 적재 -> 프로그램의 모든 내용이 RAM 위로 올라온다.
'프로그램의 모든 내용' -> 프로그램의 코드와 프로그램의 데이터를 모두 의미
--> RAM 위로 올라오는 프로그램의 내용을 크게 나눠 코드 세그먼트(Code Segment) 와 데이터 세그먼트(Data Segment)로 분류

### 읽기 전용(Read-Only) Data 부분

상수 및 리터럴 -> 이 부분에 저장되는 데이터들은 값이 절대로 변경될 수 없다.
-> 궁근적으로 보호 받는 부분

그 위에 전역 변수와 정적 변수가 거처하는 데이터 영역
그 위 바로 힙(Heap) 영역 존재
힙 맨 위 부분 스택(Stack)
스택은 지역 변수가 거처하는 곳.
스택의 특징
지역 변수가 늘어나면 크기가 아래로 증가, 지역 변수가 파괴되면 다시 스택의 크기는 위로 줄어 든다.
즉, 스택이 늘어나는 방향은 메모리 주소가 낮아지는 방향(아래 방향)

읽기 전용(Read Only) 데이터 str -> "Hello, Baby" 란 리터털의 주소 값이 들어가 있다.
따라서, str 의 값을 출력, Read Only 데이터의 위치를 대략 알 수 있다

두 번째로 전역 변수인 global 의 주소값.
str 보다는 살짝 크지만 다른 것들 보다는 많이 작다.

세 번째로 i 지역 벼수이기 때문에 stack 에 존재
stack 의 경우 지역 변수를 추가할 수록 메모리 주소가 작아지는 방향으로 추가, i 보다 나중에 추가 된 arr 의 주소값이 더 작다.
